# 原始转录文本

**标题**: Agent Skill 从使用到原理，一次讲清
**来源**: Bilibili - 马克的技术工作坊
**时长**: 17:42
**转录来源**: BibiGPT API（带时间戳）

---

## 完整转录

[0:00] 2025年10月16号

[0:01] ANTHROPIC正式推出了agent scale

[0:03] 起初官方对他的定位相当克制

[0:06] 只是希望用它来提升cloud

[0:08] 在某些特定任务上的表现

[0:09] 但大家很快发现这套设计实在是太好用了

[0:13] 因此行业里很快就跟上了节奏

[0:15] 包括vs code

[0:17] codex cursor等工具

[0:19] 都陆续加入了对agent skill的支持

[0:22] 在这样的背景下

[0:23] 12月18日

[0:24] ANTHROPIC做出了一个重要决定

[0:25] 正式将agent skill发布为开放标准

[0:29] 支持跨平台跨产品复用

[0:31] 这意味着agent skill已经超越了cloud单一产品的范畴

[0:35] 正在演变为AI agent的领域的一个通用的设计模式

[0:39] 那么这个让大厂纷纷跟进的agent skill

[0:43] 到底是解决了什么核心痛点

[0:45] 它和我们所熟悉的MCP

[0:47] 又有着怎样的区别和联系呢

[0:49] 今天这期视频我们就分几个部分

[0:52] 彻底讲清楚这个agent skill

[0:54] 我们首先从agent skill的概念出发

[0:56] 也就是给大家讲明白agent skill到底是个什么东西

[0:59] 然后我来给大家演示一下它的基本使用方法

[1:02] 在了解了基本用法之后

[1:04] 我们再来看看它的高级用法

[1:06] 高级用法一共是包含两块

[1:08] 分别是reference和script

[1:11] 最后我会把agent skill和MCP做个比较

[1:14] 告诉你到底应该选哪一个

[1:16] 好了

[1:16] 话不多说

[1:17] 让我们直接开A10哦

[1:20] 不好意思

[1:21] 只是想证明自己不是AI

[1:22] 那我们现在真的要开始喽

[1:28] 那什么是agent skill呢

[1:30] 用最通俗的话来讲

[1:31] agent skill其实就是一个大模型

[1:33] 可以随时翻阅的说明文档

[1:36] 举个例子

[1:37] 比如你想要做一个智能客服

[1:38] 你可以在skill里面明确交代

[1:41] 遇到投诉得先安抚用户的情绪

[1:43] 而且不得随意承诺

[1:45] 再比如你想要做会议总结

[1:47] 你可以直接在skill里面规定

[1:49] 必须要按照参会人员议题

[1:51] 决定这个格式来输出总结的内容

[1:54] 这样一来

[1:55] 你就不用每次对话都去重复粘贴

[1:57] 那一长串的要求了

[1:59] 大模型自己翻翻这个说明文档

[2:01] 就知道该怎么干活了

[2:02] 当然说明文档

[2:04] 只是一个为了方便理解的简化说法

[2:07] 实际上agent skill能做的事情要远比这个强大

[2:10] 它的高级功能我们待会就会讲到

[2:13] 不过在目前的起步阶段

[2:15] 你就把它当成是一个说明文档就行

[2:17] 下面我就用会议总结这个实际的场景

[2:20] 带大家看看它到底是怎么使用的

[2:25] 这里我们使用cloud code来演示如何使用agent skill

[2:29] 要想使用agent skill

[2:30] 那当然是要先创建一个了

[2:32] 根据cloud code的要求

[2:34] 我们需要在用户目录下的点cloud scale文件夹

[2:38] 创建我们的agent scale

[2:39] 所以呢就让我们先进入到这个文件夹中

[2:42] 然后执行make di会议总结助手来创建一个文件夹

[2:47] 这个文件夹的名字就代表了我们agent skill的名字

[2:51] 然后再使用vs code来打开这个文件夹

[2:54] 这样的话我们编辑文件会更方便一些

[2:57] 打开这个文件夹后

[2:58] 我们在里面创建一个叫做skill

[3:01] 点MD的文件

[3:02] 然后填好这个文件的具体内容就是这样了

[3:06] 每一个agent skill都需要有这么一个文件

[3:08] 它用来描述这个agent skill的名称能干什么事

[3:12] 以及怎么干这个事情的

[3:14] 比如我们这里要创建的agent skill

[3:16] 就是用于总结会议录音内容的

[3:18] 它的skill点MD一共分为两部分

[3:21] 头部的这几行被两段短横线包起来的

[3:24] 是叫做原数据

[3:25] 英文叫做metadata

[3:27] 这一层就只写了name和description这两个属性

[3:30] name呢是agent skill的名称

[3:32] 必须与文件夹的名字相同

[3:34] name的下面呢是description

[3:36] 它代表这个agent skill的描述

[3:38] 主要是向大模型说明

[3:40] 这个agent skill是用来干什么的

[3:41] 然后再看下面剩余的部分

[3:43] 这个呢就是具体的agent scale的说明了

[3:46] 官方把这一部分呢是叫做指令

[3:49] 对应的英文是instruction

[3:51] 这一部分就是在详细描述模型需要遵循的规则

[3:55] 比如说你看这里

[3:57] 我规定了他必须要总结参会人员

[4:00] 议题和决定这几个方面的内容

[4:04] 然后为了确保他真的理解了

[4:06] 我这里还举了一个例子

[4:07] 输入的是会议的录音内容

[4:09] 然后输出的呢就是我们所需要的格式了

[4:13] 好现在我们的agent skill应该是做好了

[4:16] 对就是这么简单

[4:18] 就是一个说明文档

[4:20] 下面我们打开cloud code来验货

[4:22] 首先随便找一个空目录

[4:24] 打开cloud code

[4:26] 然后输入下面这个问题

[4:28] 你有哪些agent skill

[4:33] cloud code给我们回答了

[4:34] 可以看出他已经发现了我们写好的agent skill

[4:37] 然后我们来看看cloud code是怎么使用这个agent skill的

[4:41] 我们输入请求

[4:42] 总结以下会议的内容

[4:44] 然后粘贴一段会议录音文本回车

[4:47] 让我们看看cloud code会如何应付我们这个问题

[4:52] 好cloud code有反应了

[4:54] 大家注意看屏幕

[4:55] 这里cloud code并没有直接开始瞎编

[4:58] 他根据我的指令意识到了这事儿

[5:00] 归我们刚才上传的那个agent skill管

[5:03] 所以呢他是在向我询问能不能使用这个agent skill

[5:07] 那我们当然是同意了

[5:09] 同意之后

[5:10] 他就开始读取我们写的那个会议总结助手了

[5:13] 主要就是读取其中的那个skill点MD文件

[5:16] 让我们稍作等待好

[5:18] 结果出来了

[5:19] 参会人员议题决定

[5:22] 三点都清清楚楚

[5:24] 这完全符合我们在skill里面定的规矩

[5:27] 这个呢就是agent skill的基础用法了

[5:30] 是不是很简单

[5:32] 现在你知道了如何创建和使用agent skill

[5:35] 那不妨让我们想想刚才到底发生了什么

[5:38] 首先整个流程中一共有三个角色用户

[5:42] cloud code以及cloud code背后所使用的大模型

[5:45] 在我们的例子里

[5:46] 这个就是cloud模型

[5:48] 流程一开始的时候

[5:49] 用户会输入请求

[5:51] 此时cloud code会把用户的请求

[5:53] 连同所有skill的名称和描述一起发给大模型

[5:57] 注意这里只带了名称和描述

[6:00] 也就是我们前面所说的skill

[6:02] 原数据层

[6:03] 虽然说我们之前只演示了一个skill

[6:06] 但是你可以想象一下

[6:07] 哪怕你装了十几个skill

[6:09] 此时的大模型呢也只是在看一份轻量级的目录

[6:12] 因为毕竟只有名称和描述嘛

[6:15] 在接到了用户请求和每一个skill的名称描述后

[6:19] 大模型会发现

[6:20] 用户的请求呢可以使用会议总结助手

[6:23] 这个agent skill来解决

[6:24] 此时呢他就会把这个信息告诉cloud code

[6:28] cloud code接到大模型的响应之后

[6:30] 会去会议总结助手

[6:31] 那个目录里面读取完整的skilled

[6:33] 点MD正文

[6:34] 对

[6:35] 这个时候读取的呢才是skilled点MD的全部内容

[6:39] 之前就只是名称和描述

[6:41] 而且要注意

[6:42] 他只读取了会议总结助手

[6:44] 这一个agent skill的内容哦

[6:46] 在拿到了会议总结助手的skilled的MD内容后

[6:49] cloud code会把用户的请求和完整的skilled点MD内容

[6:53] 发给大模型

[6:54] 大模型会根据skill点MD的要求来生成响应

[6:58] 并且把响应发给cloud code cloud code

[7:01] 进而呢会把这个响应发回给用户

[7:03] 这样呢用户就会看到结果了

[7:06] 这就引出了agent skill的第一个核心机制

[7:08] 按需加载

[7:10] 虽然skill的名字和描述是始终对模型可见的

[7:13] 但具体的指令内容只有在这个skill被选中之后

[7:17] 才会被加载进来

[7:18] 给模型看

[7:19] 这个呢就节省了很多的token了

[7:25] 前面我们讲了

[7:27] 一开始

[7:27] cloud code会把所有agent skill的名称和描述都给到模型

[7:31] 比如说什么爆款文案

[7:33] Skill

[7:34] 会议总结skill

[7:35] 数据分析

[7:36] skill等等

[7:37] 模型呢会从中选择一个之后

[7:40] 只有选中的那个skill的skill点

[7:42] MD文件才会给到模型

[7:44] 说白了呢就是按需加载

[7:46] 这个呢已经很省token了

[7:48] 但是它还不够极致

[7:50] 大家试想一下

[7:52] 我们的会议总结助手可能会越来越高级

[7:55] 我们希望它不仅仅是简单复述

[7:57] 而是能够提供更有价值的补充说明

[8:00] 比如说当会议决定要花钱时

[8:03] 他能直接在总结里标注是否符合财务合规

[8:07] 当涉及到合同时

[8:08] 它能够提示法务风险

[8:10] 这样大家在看会议总结的时候

[8:12] 就不需要再去翻规章制度

[8:15] 一眼就能够看到这些关键的补充信息

[8:18] 这就非常方便了

[8:19] 但问题在于

[8:21] skill能做这些事情的前提是

[8:23] 他要把相关的财务规定和法律条文

[8:25] 都写入到skill的MD文件里

[8:28] 这些文件可能会非常长

[8:30] 都写进去的话

[8:31] skill点MD文件就会变得无比的臃肿

[8:34] 哪怕只是开个简单的早会

[8:36] 都要被迫加载一堆

[8:37] 根本用不上的财务和法律废话

[8:40] 浪费模型资源

[8:42] 那能不能做到按需中的按需呢

[8:45] 比如说只有当会议内容真的聊到了钱

[8:48] cloud code才会把财务规定加载给模型看

[8:52] 其实这个呢也是可以的

[8:54] agent skill呢提供了reference的概念

[8:57] 干的就是这个活

[8:58] 让我们来试一下

[8:59] 首先我们来给它加一个文件

[9:01] 也就是agent skill术语里面的reference

[9:04] 我们把这个文件叫做集团财务手册

[9:07] 里面写明了各种费用的报销标准

[9:10] 比如说是住宿补贴510晚

[9:12] 餐饮费人均310晚之类的

[9:14] 然后我们在原来的skill点MD文件里面

[9:16] 新增一个财务提醒规则

[9:18] 里面写明仅在提到钱预算采购费用的时候触发

[9:23] 出发的时候呢

[9:24] 需要读取集团财务手册点MD这个文件

[9:27] 根据文件内容指出会议决定中的金额是否超标

[9:30] 并明确审批人

[9:32] 这就可以了

[9:33] 我们回到cloud code这里再试一下

[9:36] 这次我们的请求仍然是总结下这个会议的内容

[9:40] 不过呢这次使用的会议内容稍微换了一下

[9:43] 这段对话呢我们就不细看了

[9:45] 你只需要知道

[9:46] 在这段对话里面

[9:47] 老陈让小李订1210晚的酒店

[9:50] 这涉及到了钱

[9:51] 按道理来说

[9:52] cloud code应该触发我们刚才新增的财务提醒规则

[9:56] 让我们看看cloud code能不能意识到这一点

[9:59] 首先cloud code意识到了

[10:01] 这个请求跟我们的会议总结助手相关联

[10:04] 请求使用这个agent skill

[10:06] 我们同意

[10:09] 然后他意识到了这个会议跟钱相关

[10:12] 根据skilled的MD文件的指示

[10:14] 他请求读取集团财务手册

[10:16] 这个文件用于查看里面的财务合规信息

[10:19] 这个呢我们也同意啊

[10:23] 最后他根据实际的会议内容生成了总结

[10:26] 可以看出总结中不仅包含参会人员

[10:29] 议题决定等基本信息

[10:31] 还包含了财务提醒

[10:33] 这完美符合我们的需求

[10:35] 这个呢就是reference的核心逻辑了

[10:38] 在agent skill的体系里面

[10:39] 集团财务手册

[10:41] 点MD这个文件就是一个典型的reference

[10:44] 请大家记住它的特性

[10:46] 他呢是条件触发的

[10:48] 在刚才的例子里面

[10:49] 只有当cloud code读取完skill点MD文件

[10:52] 判断出需要查账时才会去加载这个文件

[10:56] 反过来说

[10:57] 如果这是一个跟钱无关的技术复盘会

[10:59] 那么这个财务文件就只会躺在硬盘里面

[11:03] 绝不会占用哪怕一个token的上下文

[11:05] 好讲完了reference

[11:07] 接下来我们来讲讲如何让agent skill跑代码

[11:11] 毕竟查资料只是第一步

[11:13] 能直接动手运行代码

[11:14] 帮我们把活儿干了

[11:15] 这才是真正的自动化

[11:17] 这个呢就用到了agent skill的另一大能力

[11:20] Script

[11:25] 让我们在文件夹里面创建一个Python脚本

[11:28] 文件名

[11:29] 就叫做upload点pie用于上传文件之后

[11:32] 我们填好这个代码文件的内容

[11:35] 然后我们来到SK点MD这个文件里

[11:38] 再加上一段关于上传规则的描述

[11:42] 如果用户提到了上传同步

[11:45] 或者是发送到服务器这样的字眼

[11:47] 你必须运行upload pie脚本

[11:49] 将总结内容上传到服务器

[11:51] 然后呢我们来到cloud code这边

[11:53] 输入请求

[11:54] 总结下这个会议的内容

[11:56] 并把它上传到服务器中

[11:58] 然后我们粘贴会议内容跟之前一样

[12:02] cloud code意识到了

[12:03] 这个请求与我们的会议总结助手相关

[12:06] 所以呢他请求使用这个agent skill

[12:08] 我们同意

[12:10] 然后他把会议的总结内容输出了出来

[12:13] 并准备上传到服务器中

[12:14] 他请求执行UPF6点pi文件来实现这个功能

[12:18] 我们也同意

[12:22] 好上传成功

[12:24] 而且cloud code还把上传相关的一些信息

[12:27] 也展示了出来

[12:28] 非常棒

[12:29] 这里面呢有个小插曲

[12:31] 大家注意一下

[12:32] 我这次所使用的会议内容跟钱其实没什么关系

[12:35] 所以cloud code呢也并没有去读取集团财务手册

[12:39] 那个文件

[12:40] 结果中呢也没有财务提醒相关的内容

[12:43] 这正好印证了我前面所说的观点

[12:45] reference是按需加载的

[12:47] 如果用户没有提到与reference相关的内容

[12:50] 那cloud code是不会去读取它的

[12:53] 这样就达到了节省上下文token的目的

[12:55] 好让我们再回到代码执行部分

[12:58] 注意看这里

[12:59] cloud code申请执行这个upload pi文件

[13:03] 他并没有去读取这个文件

[13:05] 没错

[13:06] agent skill里面的代码只会被执行

[13:08] 不会被读取

[13:10] 这就意味着

[13:11] 哪怕你的脚本写了1万行复杂的业务逻辑

[13:14] 它消耗的模型上下文呢也几乎是零

[13:17] cloud code只关心脚本的运行方法和运行结果

[13:20] 至于这个脚本的内容

[13:21] 它可以说是毫不在意

[13:23] 所以呢虽然reference和script都属于agent skill的高级功能

[13:28] 但是呢他们对于模型上下文的影响

[13:30] 其实是截然不同的

[13:32] reference是读

[13:33] 它会把内容加载到上下文里面

[13:36] 所以呢是会消耗token的

[13:38] script呢是跑

[13:39] 它只会被执行

[13:41] 不会占用模型的上下文

[13:43] 讲到这里

[13:44] 我们需要停下来稍微做个总结

[13:46] 聊一聊agent skill的渐进式披露机制

[13:52] agent skill的设计

[13:53] 其实是一个精密的渐进式披露结构

[13:56] 这个结构里面一共有三层

[13:58] 每一层的加载机制都不太一样

[14:00] 第一层是原数据层

[14:02] 这里有所有的agent skill的名称和描述

[14:05] 它们是始终加载的

[14:07] 相当于大模型里面的目录

[14:09] 大模型每次回答前都会看一下这一层的信息

[14:12] 然后决定用户的问题是否与某个agent scale相匹配

[14:15] 第二层是指令层

[14:17] 对应skilled的MD文件里面除了名称和描述之外

[14:21] 其余的部分

[14:22] 只有当大模型发现用户的问题

[14:24] 与某个agent skill相匹配的时候

[14:26] 他才会去加载这一层的内容

[14:28] 所以呢我们称这一层为按需加载

[14:31] 第三层是资源层

[14:33] 这个呢是最深的一层

[14:34] 它一共是包含reference和script两方面的内容

[14:37] 其实按照官方最新的规范

[14:39] 应该还有一个组成部分叫做assets

[14:41] 不过我看了一下

[14:43] 它跟reference的定义似乎有部分重叠

[14:45] 因此我们这里先忽略它好

[14:48] 我们刚才例子里面的集团财务手册和upload点

[14:51] pi脚本就属于这一层

[14:53] 只有当模型发现用户问题

[14:55] 与财务或者上传相关的时候

[14:57] 他才会去加载这一层的内容

[14:59] 这就相当于是在按需加载的指令层基础上

[15:02] 又做了一次按需加载

[15:03] 所以我们可以称它为按需中的按需加载

[15:07] 当然这是我起的名字啊

[15:08] reference和script的加载方式其实不太一样

[15:11] reference是被读取的

[15:13] cloud code会把对应文件的内容放到模型的上下文中

[15:17] 以供回答时参考

[15:19] 而script是被执行的

[15:21] cloud code根本就不会去看代码的内容

[15:24] 他只关心代码的执行结果

[15:26] 当然这个也不是铁律啊

[15:28] 如果你没有把代码的执行方法说清楚

[15:30] cloud code还是有可能会去看一下代码的

[15:33] 毕竟跑不下去了嘛

[15:34] 这样的话呢就会占用模型的上下文了

[15:37] 所以还是请大家写skill的时候

[15:39] 尽可能的把一切都解释清楚

[15:45] 那聊完了agent skill的用法

[15:47] 很多朋友可能会有种似曾相识的感觉

[15:49] agent skill好像是跟MCP有点像啊

[15:52] 本质上都是让模型去连接和操作外部世界

[15:55] 既然功能重叠

[15:57] 那我们到底应该用哪一个呢

[15:59] 关于这个问题

[16:00] ANTHROPIC官方写过一篇相关的文章

[16:03] 来解释核心观点

[16:04] 就一句话就在这里

[16:06] Mc p connects cloud data skills teach cloud

[16:10] What do with that data

[16:11] 这句话可以说是直接点明了

[16:13] MCP与agent skill的区别

[16:15] 它其实就是在说MCP给大模型供给数据

[16:19] 比如说查询昨天的销售记录

[16:21] 读取订单的物流状态等等

[16:23] 而skill是教会大模型如何处理这些数据的

[16:27] 比如说是会议总结必须要有个议题啊

[16:30] 汇报文档必须要包含具体的数据啊

[16:33] 等等到这里有些同学可能就会问了

[16:35] 不对呀

[16:36] agent skill里面也能写代码

[16:38] 我直接在agent skill里面写

[16:40] 连接数据的逻辑不就好了吗

[16:42] 这样呢就不需要MCP了

[16:44] agent skill就直接把这两个活都给干了

[16:47] 确实啊

[16:48] agent skill也能连数据功能上与MCP有所重叠

[16:51] 但是能干并不代表适合干

[16:55] 这就好像是瑞士军刀也能切菜

[16:57] 但没有人会这么干

[16:58] 我们这个场景呢其实也是这样

[17:00] MCP本质上是一个独立运行的程序

[17:03] 而agent skill本质上是一段说明文档

[17:06] 它们的本质不同

[17:07] 决定了适合的场景也是不同的

[17:10] agent skill更适合跑一些轻量的脚本处理

[17:13] 简单的逻辑

[17:14] 在代码执行方面

[17:15] agent skill的安全性和稳定性都不及MCP

[17:18] 所以大家还是要根据场景选择合适的工具

[17:22] 甚至在很多的场景下

[17:23] 我们需要把agent skill和MCP结合起来一起使用

[17:27] 以便尽可能的满足我们的需求

[17:29] 好今天的视频呢就到此结束了

[17:32] 我是马克

[17:33] 用最通俗的语言讲最硬核的技术

[17:36] 如果我的视频对你有帮助

[17:37] 欢迎点赞订阅

[17:39] 我们下次再见

[17:40] 拜拜

---

**字幕条数**: 453 条
**总字符数**: 6406 字符
