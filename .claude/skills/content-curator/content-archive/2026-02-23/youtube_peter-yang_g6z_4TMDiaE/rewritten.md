1. AI 不是工具，是可以被训练的队友。你投入时间教它你的偏好，它就不会再犯同样的错误——这才是复利的起点。
2. 模型会把你的脚手架当早餐吃掉。你不主动把最佳实践写进系统，它每次都从零开始，你的经验永远不会积累。
3. 从零到生产，一条命令，一个小时。这不是未来，这是 Kieran 今天的日常工作流。
4. 你现在需要的不是更好的编程技能，而是更好的技术 Lead 技能——因为你在管理的是 AI 工程师团队。
5. CLAUDE.md 是你最便宜的复利工具。每次它犯错，你说一句"把这个加进去"，它就永远不会再犯。

```
📝 创作说明
嘉宾：Kieran Klaassen
选题方向：Every 旗下 Kora 产品 CTO 分享如何通过"复合工程"让 Claude Code 越用越聪明
内容评分：信息密度 8/10，数据支撑 6/10，洞见深度 9/10
目标字数：2100 字
核心价值：一套可直接复用的 AI 工程工作流，让开发者从"用 AI 写代码"升级到"管理 AI 工程师团队"
```

---

## 你的 AI 每次都在从零开始，而你浑然不觉

Kieran Klaassen 打开终端，输入一条命令，然后去做别的事。一个小时后，他回来，功能已经实现，测试已经跑完，视频录制好了，Pull Request 也提交了。

这不是演示 Demo，这是他在 Every 公司旗下产品 Kora 的日常开发节奏。

Kora 是一个 AI 邮件助手，每天两次帮用户筛选收件箱并生成简报。Kieran 作为 CTO，现在几乎 100% 的代码都由 AI 完成。他上一次打开 Cursor 是三个月前，用来看文本文件。

但他真正想聊的，不是"AI 能写代码"这件大家都知道的事，而是一个更底层的问题：**为什么大多数人用 AI 写代码，越用越累，而不是越用越轻松？**

答案很简单：他们没有让 AI 学习。

## 复合工程：把 AI 当可训练的队友，不是一次性工具

Kieran 把自己的方法论叫做"复合工程"（Compound Engineering）。这个词来自复利的概念——每一次工作循环，都应该让下一次变得更好。

核心逻辑是一个四步闭环：**计划（Plan）→ 执行（Work）→ 评审（Assess）→ 固化（Compound）**。

前三步很多人都在做，但第四步是关键。每次完成一个功能，你都会发现一些东西：AI 漏掉了某个边界情况，或者它用了一种你不喜欢的架构模式，或者它生成了过于复杂的代码。大多数人的做法是手动改掉，然后继续。

Kieran 的做法是：把这个发现写进系统。

"如果你发现它犯了错，就说'把这个加进 CLAUDE.md'。它就永远不会再犯。"

CLAUDE.md 是 Claude Code 的全局上下文文件——任何写进去的内容，都会在每次对话时自动注入到提示词里。这是最轻量的复合工程入口，不需要任何插件，不需要任何配置，只需要一个习惯：**每次发现问题，立刻固化。**

## 计划阶段：不要让 AI 在黑暗中摸索

Kieran 构建了一个 Claude Code 插件，叫做 Compound Engineering Plugin，开源在 GitHub（github.com/EveryInc/compound-engineering-plugin）。插件的核心是把四步闭环变成可执行的斜杠命令。

计划阶段的命令是 `/workflows plan`。它不只是让 Claude Code 看一眼你的代码库然后开始写——它会启动三个并行的子代理（Sub-agents）：

- **最佳实践研究员**：搜索互联网上关于这个功能的最佳实践文章
- **框架研究员**：检查你使用的框架和库的当前版本，避免版本不匹配
- **规格流程分析器（Spec Flow Analyzer）**：模拟不同用户角色走一遍完整流程，检查计划是否遗漏了某个页面或功能节点

这三个子代理在独立的上下文中运行，不会污染主线程。代价是 token 消耗很高——Kieran 演示时，单次计划阶段就消耗了 56,000 到 77,000 个 token。他的建议是：用 Claude 的 Max 计划，把这当作工作成本，而不是试图省钱。

"我们 CEO Dan 总是提醒我关注成本。但他也说，如果我们不知道现在能做什么，我们就会被困在过去。"

规格流程分析器是 Kieran 特别强调的一个设计。他发现 AI 在规划时有一个典型问题：它会过度聚焦在某个具体的技术实现上，然后忘记这个功能是整个产品流程的一部分。"它有时候会忘掉一整个页面，或者某个功能没有接入正确的流程。"分析器的作用就是在执行之前，从用户视角做一次完整性检查。

## 计划是人机协作的最佳时机

计划生成后，Kieran 会用 Typora（一个 Markdown 阅读器，主题叫 Witty）打开来读。

这个细节值得注意。他不是直接说"开始执行"，而是认真读计划，然后提出修改意见。在演示中，他看到计划里创建了大量独立的工具函数，于是问："能不能把这些合并成一个工具，减少复杂度？"

AI 重新调整了方案。

"在这里花时间是值得的。如果你已经实现了一个小时，再想推翻重来就很难了。"

这是复合工程哲学里一个反直觉的地方：**越早介入，成本越低。** 在计划阶段改一个架构决策，代价是几分钟的对话。在实现阶段改，代价是推翻几百行代码。

## Skills：给 AI 装上"按需调用的专业知识"

除了 CLAUDE.md 这个全局上下文，Kieran 还大量使用 Skills（技能文件）来管理知识。

Skills 和 CLAUDE.md 的区别在于：CLAUDE.md 里的内容每次都会加载，而 Skills 是"即时上下文"——AI 会判断当前任务是否需要某个 Skill，需要时才拉取。

Kieran 有一个叫做"Agent Native Architecture"的 Skill，里面是一份关于如何构建代理原生应用的详细文档，包含大量参考资料。如果把这份文档直接放进 CLAUDE.md，上下文会被撑爆。但作为 Skill，它只在相关任务时才出现。

"如果你把所有 Skill 都加载进上下文，你的上下文就死了。但用 Skills，它是即时的——需要时才拉取。"

Skills 不需要手写。插件里有一个 `/create agent skill` 命令，可以根据你的代码库和工作模式自动生成。但 Kieran 强调：生成之后一定要读一遍，确认内容是否准确。

## Playwright：AI 终于有了真正的 QA 团队

执行阶段完成后，Kieran 会让 Claude Code 用 Playwright 跑端到端测试。

Playwright 是一个浏览器自动化工具，通过 MCP（Model Context Protocol）接入 Claude Code 后，AI 可以直接控制 Chrome 浏览器——点击元素、运行 JavaScript、读取控制台日志、截图、录制视频。

"你不需要写测试。你就说'去测一下'。它就是一个 QA 团队。如果有什么东西坏了，它可以立刻修，然后立刻验证修好了没有。"

Kieran 特别提到 Claude Opus 4.5 在 Playwright 上的表现是他用过的模型里最好的。"之前的模型写 Playwright 测试还行，但真正跑起来总有问题。Opus 4.5 是第一个让我觉得 Playwright 真的能用的模型。"

更有意思的是他用 Playwright 测试 Gmail 集成的案例。Kora 需要连接 Gmail 来处理邮件签名和草稿功能。传统的系统集成测试根本没法测这个——你不可能在 CI 里登录真实的 Gmail 账号。但用 Playwright，Kieran 直接登录自己的 Gmail，让 AI 去验证功能是否正常工作。"它就像一个浏览器，去了 Gmail，功能正常。这太神奇了。"

## 评审阶段：让 DHH 来审你的代码

执行和测试完成后，是评审阶段（`/assess`）。

Kieran 配置了多个评审视角的子代理：安全审查员、架构审查员、代码简洁性审查员，以及一个"Agent Native"审查员——检查代码是否足够适合代理调用。

最有趣的是他加了一个 DHH（David Heinemeier Hansson，Rails 框架创始人）风格的审查员。"DHH 对事情有非常强烈的观点，这很有意思。"

评审结果不是简单的"这里有问题"，而是综合成一个叙事："这是可以改进的地方，这是权衡，这是为什么应该这样做。"Kieran 认为这比 linter 有价值得多——它给出的是判断，不只是规则检查。

评审完成后，他可以说"修掉"，也可以说"固化"——把这个发现写进文档，让下一次计划时自动考虑进去。

## LFG：一条命令，从零到生产

最后，Kieran 展示了他最喜欢的命令：`/lfg`。

LFG 是"Let's F***ing Go"的缩写。这条命令会自动执行完整的四步闭环：计划、执行、评审、固化，外加跑 Playwright 测试、录制功能演示视频、提交 Pull Request。整个过程大约一个小时，不需要人工干预。

"从零到生产，一条命令。这是最让我印象深刻的事。"

但 Kieran 也很清楚，LFG 能跑得好，是因为前期做了大量的复合工程工作——把最佳实践写进 CLAUDE.md，把架构决策写进 Skills，把评审标准写进子代理配置。LFG 是收割复利的命令，不是跳过积累的捷径。

"你需要先做一段时间的复合循环，训练它。就像给新人做入职培训一样。但一旦完成，你就可以放手让它跑了。"

---

Kieran 现在的工作状态，更像是一个技术 Lead 在管理一个工程师团队：开会讨论方案，审查计划，给出反馈，然后让团队去执行。只不过这个团队是 AI，而且永远不会忘记你上次说过的话——只要你把它写进了系统。

问题不是 AI 能不能写好代码。问题是：你有没有在认真教它？
